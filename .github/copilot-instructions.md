# בוט טלגרם לניהול הוצאות - הוראות Copilot

זה אפליקציית Node.js שמשמשת כבוט טלגרם לניהול הוצאות.

## סקירת הפרויקט
- **פלטפורמה**: Telegram Bot API
- **APIs**: Telegram Bot API, Google Sheets API
- **פריסה**: מקומית או VPS
- **אחסון**: Google Sheets
- **תכונות**: פרסור הוצאות, מעקב מיקום, יצירת דוחות

## רכיבים עיקריים

### אפליקציה ראשית (`telegram-bot.js`)
- בוט טלגרם עם polling
- עיבוד ופרסור הודעות
- אינטגרציה עם Google Sheets לאחסון נתונים
- טיפול במיקומים ואחסון זמני
- פונקציונליות יצירת דוחות

### משתני סביבה נדרשים
- `TELEGRAM_TOKEN`: טוקן הבוט מ-@BotFather
- `SHEET_ID`: מזהה גיליון Google Sheets
- `GOOGLE_SERVICE_ACCOUNT_CREDENTIALS`: אישורי service account JSON

## הנחיות פיתוח

### סגנון קוד
- שימוש ב-async/await לפעולות אסינכרוניות
- כולל טיפול מקיף בשגיאות
- לוג פעולות חשובות לדיבוג
- שמירת הפרדה נקייה בין concerns

### עיבוד הודעות
- פרסור הודעות טקסט בפורמט הוצאה: "פריט מחיר"
- טיפול בהודעות מיקום לאחסון קואורדינטות
- מענה עם אישורים מתאימים או הודעות עזרה
- תמיכה בפקודת דוח לסיכום הוצאות

### אינטגרציה עם Google Sheets
- הוספת הוצאות כשורות חדשות: [זמן, פריט, מחיר, מיקום, משתמש]
- קריאת נתונים ליצירת דוחות
- טיפול באימות באמצעות service account

### אינטגרציה עם טלגרם
- קבלת הודעות באמצעות polling
- שליחת תגובות מעוצבות חזרה למשתמשים
- טיפול בסוגי הודעות שונים (טקסט, מיקום)
- תמיכה בפקודות ו-inline keyboards

## בדיקות ודיבוג
- שימוש במצב דמו לבדיקת תצורה
- בדיקת פרסור הודעות עם פורמטים שונים
- וידוא שמשתני הסביבה מוגדרים כראוי

## הערות פריסה
- מתוכנן להרצה מקומית או על VPS
- כל הפונקציונליות בקובץ יחיד
- שימוש באחסון זמני בזיכרון (מיקומים)
- כולל תצורת polling מתאימה
